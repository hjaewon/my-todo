<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>할일 앱</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 로그인/회원가입 화면 -->
    <div class="auth-container" id="authContainer">
        <!-- 로그인 폼 -->
        <div class="auth-box" id="loginBox">
            <h1 class="auth-title">할일 앱</h1>
            <p class="auth-subtitle">로그인하여 시작하세요</p>
            
            <div class="auth-form">
                <div class="input-group">
                    <label>아이디</label>
                    <input type="text" id="loginId" class="auth-input" placeholder="아이디를 입력하세요">
                </div>
                
                <div class="input-group">
                    <label>비밀번호</label>
                    <input type="password" id="loginPassword" class="auth-input" placeholder="비밀번호를 입력하세요">
                </div>
                
                <button class="auth-button" id="loginButton">로그인</button>
                
                <p class="forgot-password">
                    <span class="auth-link" id="showForgotPassword">비밀번호 찾기</span>
                </p>
                
                <p class="auth-switch">
                    계정이 없으신가요? 
                    <span class="auth-link" id="showSignup">회원가입</span>
                </p>
            </div>
        </div>
        
        <!-- 비밀번호 변경 폼 -->
        <div class="auth-box" id="forgotPasswordBox" style="display: none;">
            <h1 class="auth-title">비밀번호 변경</h1>
            <p class="auth-subtitle" id="forgotSubtitle">가입하신 아이디와 이메일을 입력하세요</p>
            
            <div class="auth-form">
                <!-- 1단계: 본인 확인 -->
                <div id="verifyStep">
                    <div class="input-group">
                        <label>아이디</label>
                        <input type="text" id="forgotId" class="auth-input" placeholder="아이디를 입력하세요">
                    </div>
                    
                    <div class="input-group">
                        <label>이메일</label>
                        <input type="email" id="forgotEmail" class="auth-input" placeholder="가입 시 입력한 이메일을 입력하세요">
                    </div>
                    
                    <button class="auth-button" id="verifyButton">본인 확인</button>
                </div>
                
                <!-- 2단계: 비밀번호 변경 -->
                <div id="changePasswordStep" style="display: none;">
                    <div class="verify-success">
                        <span class="success-icon">✓</span>
                        <p>본인 확인이 완료되었습니다</p>
                    </div>
                    
                    <div class="input-group">
                        <label>새 비밀번호</label>
                        <input type="password" id="newPassword" class="auth-input" placeholder="새 비밀번호를 입력하세요">
                    </div>
                    
                    <div class="input-group">
                        <label>새 비밀번호 확인</label>
                        <input type="password" id="newPasswordConfirm" class="auth-input" placeholder="새 비밀번호를 다시 입력하세요">
                    </div>
                    
                    <button class="auth-button" id="changePasswordButton">비밀번호 변경</button>
                </div>
                
                <p class="auth-switch">
                    <span class="auth-link" id="backToLogin">로그인으로 돌아가기</span>
                </p>
            </div>
        </div>
        
        <!-- 회원가입 폼 -->
        <div class="auth-box" id="signupBox" style="display: none;">
            <h1 class="auth-title">회원가입</h1>
            <p class="auth-subtitle">새 계정을 만드세요</p>
            
            <div class="auth-form">
                <div class="input-group">
                    <label>아이디</label>
                    <div class="id-check-wrapper">
                        <input type="text" id="signupId" class="auth-input id-input" placeholder="아이디를 입력하세요">
                        <button class="id-check-button" id="idCheckButton">중복확인</button>
                    </div>
                    <span class="id-check-message" id="idCheckMessage"></span>
                </div>
                
                <div class="input-group">
                    <label>비밀번호</label>
                    <input type="password" id="signupPassword" class="auth-input" placeholder="비밀번호를 입력하세요">
                </div>
                
                <div class="input-group">
                    <label>비밀번호 확인</label>
                    <input type="password" id="signupPasswordConfirm" class="auth-input" placeholder="비밀번호를 다시 입력하세요">
                </div>
                
                <div class="input-group">
                    <label>이메일</label>
                    <input type="email" id="signupEmail" class="auth-input" placeholder="이메일을 입력하세요">
                </div>
                
                <div class="input-group">
                    <label>닉네임</label>
                    <input type="text" id="signupNickname" class="auth-input" placeholder="닉네임을 입력하세요">
                </div>
                
                <button class="auth-button" id="signupButton">회원가입</button>
                
                <p class="auth-switch">
                    이미 계정이 있으신가요? 
                    <span class="auth-link" id="showLogin">로그인</span>
                </p>
            </div>
        </div>
    </div>
    
    <!-- 메인 앱 화면 -->
    <div class="app-container" id="appContainer" style="display: none;">
        <!-- 달력 영역 -->
        <div class="calendar-section" id="calendarSection">
            <div class="calendar-header">
                <button class="nav-btn" id="prevMonth">&lt;</button>
                <h1 class="calendar-title" id="currentMonth"></h1>
                <button class="nav-btn" id="nextMonth">&gt;</button>
                <button class="search-btn" id="searchBtn">🔍</button>
            </div>
            
            <!-- 사용자 정보 및 로그아웃 -->
            <div class="user-info-bar">
                <span class="user-nickname" id="userNickname"></span>
                <button class="logout-btn" id="logoutBtn">로그아웃</button>
            </div>
            
            <!-- 기본 달력 뷰 -->
            <div class="calendar-view" id="calendarView">
                <div class="calendar-weekdays">
                    <div class="weekday">일</div>
                    <div class="weekday">월</div>
                    <div class="weekday">화</div>
                    <div class="weekday">수</div>
                    <div class="weekday">목</div>
                    <div class="weekday">금</div>
                    <div class="weekday">토</div>
                </div>
                <div class="calendar-grid" id="calendarGrid"></div>
            </div>
            
            <!-- 월 선택 뷰 -->
            <div class="month-picker-view" id="monthPickerView" style="display: none;">
                <div class="month-grid" id="monthGrid"></div>
            </div>
            
            <!-- 연도 선택 뷰 -->
            <div class="year-picker-view" id="yearPickerView" style="display: none;">
                <div class="year-range-header">
                    <button class="year-nav-btn" id="prevYearRange">&lt;</button>
                    <span class="year-range-label" id="yearRangeLabel"></span>
                    <button class="year-nav-btn" id="nextYearRange">&gt;</button>
                </div>
                <div class="year-grid" id="yearGrid"></div>
            </div>
        </div>

        <!-- 노트 영역 -->
        <div class="note-section" id="noteSection">
            <div class="note-header">
                <h2>메모장</h2>
                <button class="close-note-btn" id="closeNoteBtn">✕</button>
            </div>
            <textarea class="note-textarea" id="noteTextarea" placeholder="여기에 메모를 작성하세요..."></textarea>
        </div>

        <!-- 노트 열기 버튼 (노트가 닫혔을 때 표시) -->
        <button class="open-note-btn" id="openNoteBtn" style="display: none;">메모장 열기</button>
    </div>

    <!-- 할일 팝업 -->
    <div class="popup-overlay" id="popupOverlay">
        <div class="popup-container">
            <div class="popup-header">
                <h2 id="popupTitle">할일 관리</h2>
                <button class="popup-close-btn" id="popupCloseBtn">✕</button>
            </div>
            
            <div class="popup-content">
                <!-- 할일 입력 영역 -->
                <div class="todo-input-section">
                    <input type="text" id="todoInput" class="todo-input" placeholder="할일을 입력하세요">
                    <button class="add-todo-btn" id="addTodoBtn">추가</button>
                </div>

                <!-- 할일 목록 -->
                <div class="todo-list" id="todoList"></div>
                
                <!-- 구분선 -->
                <div class="section-divider">
                    <span class="divider-text">⏰ 시간별 기록</span>
                </div>
                
                <!-- 시간별 기록 -->
                <div class="time-record-section">
                    <div class="time-record-list" id="timeRecordList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 미리보기 툴팁 -->
    <div class="preview-tooltip" id="previewTooltip"></div>

    <!-- 검색 팝업 -->
    <div class="popup-overlay" id="searchPopupOverlay">
        <div class="popup-container search-popup-container">
            <div class="popup-header">
                <h2>할일 검색</h2>
                <button class="popup-close-btn" id="searchPopupCloseBtn">✕</button>
            </div>
            
            <div class="popup-content">
                <!-- 검색 입력 영역 -->
                <div class="search-input-section">
                    <input type="text" id="searchInput" class="search-input" placeholder="검색어를 입력하세요">
                    <button class="search-execute-btn" id="searchExecuteBtn">검색</button>
                </div>

                <!-- 검색 결과 -->
                <div class="search-results" id="searchResults">
                    <div class="no-search-message">검색어를 입력하고 검색 버튼을 눌러주세요</div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

